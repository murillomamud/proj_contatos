/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

(c) Copyright 2009-2015 SAP SE. All rights reserved
 */
sap.ui.define(['jquery.sap.global','./ShapeMarker','sap/ui/core/Control'],function(q,S,C){var a=C.extend('sap.viz.ui5.controls.chartpopover.ContentPanel',{metadata:{publicMethods:["setContentData"]},renderer:{render:function(r,c){r.write('<div');r.addClass("viz-controls-chartPopover-contentPanel");r.writeClasses();r.write('>');r.renderControl(c._oShapeLabel);r.renderControl(c._oPanel);r.write('</div>');}}});a.prototype.init=function(){this._measureItemsLen=0;this._maxMeasureLableLen=15;this._maxMeasureValueLen=12;this._oShapeLabel=new S(this._createId('vizShapeMarker'),{}).addStyleClass('viz-controls-chartPopover-dimension-marker');this._oDimLabel=new sap.m.Text(this._createId('vizDimensionLabel'),{}).addStyleClass('viz-controls-chartPopover-dimension-label');this._oForm=new sap.ui.layout.form.SimpleForm({editable:false,maxContainerCols:2,layout:"ResponsiveGridLayout",labelSpanL:6,labelSpanM:6,labelSpanS:6,emptySpanL:0,emptySpanM:0,emptySpanS:0,columnsL:2,columnsM:2,content:[]});this._oPanel=new sap.ui.layout.Grid({width:'100%',defaultSpan:"L12 M12 S12",content:[this._oDimLabel,this._oForm]}).addStyleClass('viz-controls-chartPopover-Vlt');};a.prototype.setContentData=function(d){var v=d.val,b='',m=[],c;this._measureItemsLen=0;if(v){this._oForm.removeAllContent();var e=false,i;for(i=0;i<v.length;i++){if(v[i].type&&v[i].type.toLowerCase()==='measure'){c=v[i].value;if(c==null){c=this._getNoValueLabel();}if(v[i].name.length>this._maxMeasureLableLen||c.length>this._maxMeasureValueLen){e=true;break;}}}for(i=0;i<v.length;i++){if(v[i].type&&v[i].type.toLowerCase()==='dimension'){if(b==null){b=this._getNoValueLabel();}else if(b.length>0){b=b+' - '+v[i].value;}else{b=v[i].value;}}else if(v[i].type&&v[i].type.toLowerCase()==='measure'){c=v[i].value;if(c==null){c=this._getNoValueLabel();}if(e){this._oForm.setLabelSpanS(12);this._oForm.addContent(new sap.m.Text({text:v[i].name}).addStyleClass('viz-controls-chartPopover-measure-labels').addStyleClass('viz-controls-chartPopover-measure-labels-wrapper-name'));this._oForm.addContent(new sap.m.Text({text:c,textAlign:sap.ui.core.TextAlign.Start}).addStyleClass('viz-controls-chartPopover-measure-labels').addStyleClass('viz-controls-chartPopover-measure-labels-wrapper-value'));}else{this._oForm.setLabelSpanS(6);this._oForm.addContent(new sap.m.Label({text:v[i].name}).addStyleClass('viz-controls-chartPopover-measure-labels'));this._oForm.addContent(new sap.m.Text({text:c,textAlign:sap.ui.core.TextAlign.End}).addStyleClass('viz-controls-chartPopover-measure-labels'));}}}if(typeof d.color==='string'){var f=this._oDimLabel.$().css('margin-left');if(f){f=parseInt(f.substr(0,f.length-2),10);this._oShapeLabel.setMarkerSize(f);}this._oShapeLabel.setColor(d.color).setType((d.shape?d.shape:'square'));}else{this._oPanel.removeContent(this._oShapeLabel);}if(b&&b.length>0){this._oDimLabel.setText(b);}else{this._oPanel.removeContent(this._oDimLabel);}this._measureItemsLen=d.val.length;}};a.prototype.isMultiSelected=function(){return this._measureItemsLen===0;};a.prototype._createId=function(i){return this.getId()+"-"+i;};a.prototype._getNoValueLabel=function(){return sap.viz.extapi.env.Language.getResourceString("IDS_ISNOVALUE");};a.prototype.exit=function(i){if(this._oForm){this._oForm.destroy();this._oForm=null;}if(this._oShapeLabel){this._oShapeLabel.destroy();this._oShapeLabel=null;}if(this._oDimLabel){this._oDimLabel.destroy();this._oDimLabel=null;}if(this._oPanel){this._oPanel.destroy();this._oPanel=null;}};return a;});
